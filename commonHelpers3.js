import{o as v,T as b}from"./assets/main-2ad745db.js";import"./assets/vendor-aedd9b60.js";const u=document.querySelector(".my-library-movie-list"),g=document.querySelector(".my-library-sorry"),c=document.querySelector(".my-library-main-section .my-library-button"),h=document.getElementById("my-library-button-search"),p=document.querySelector(".my-library-main-section"),l=document.querySelector("#genre");let a=0;const f=9,d=new Map;async function L(){try{(await new b().getMovieGenres()).forEach(t=>{t.id&&t.name&&d.set(t.id,t.name)}),S()}catch(e){console.error("Error fetching genres:",e)}}function S(){if(!l.querySelector('option[value=""]')){const e=document.createElement("option");e.value="",e.textContent="Genre",e.disabled=!0,e.selected=!0,l.appendChild(e)}d.forEach((e,o)=>{const t=document.createElement("option");t.value=e.toLowerCase(),t.textContent=e,l.appendChild(t)})}function M(e){const o=document.createElement("li");o.classList.add("my-library-movie-list-item");const t=(e.genre_ids||[]).map(s=>d.get(s)||"Unknown").join(", "),n=e.id,r=new Date(e.release_date).getFullYear();o.dataset.id=n;const i=`https://image.tmdb.org/t/p/w500${e.poster_path}`;return o.style.backgroundImage=`url(${i})`,o.style.backgroundSize="cover",o.style.backgroundPosition="center",o.innerHTML=`
    <div class="my-library-gradient"></div>
    <div class="my-library-movie">
      <span class="my-library-movie-title">${e.title}</span>
      <span class="my-library-movie-genres">${t} | ${r}</span>
    </div>
  `,o}function m(e="",o=!0){const t=JSON.parse(localStorage.getItem("myLibrary"))||[];console.log("Total Movies:",t.length),o&&(a=0);const n=e?t.filter(r=>(r.genre_ids||[]).some(s=>d.get(s).toLowerCase()===e.toLowerCase())):t;o&&(u.innerHTML=""),console.log("Filtered Movies:",n.length),n.length>0?(p.style.display="block",g.style.display="none",document.querySelector(".genre-form").style.display="block",n.slice(a,a+f).forEach(i=>{const s=M(i);u.appendChild(s)}),a+=f,a>=n.length?(c.style.display="none",console.log("Hiding Load More Button")):(c.style.display="block",console.log("Showing Load More Button"))):(g.style.display="block",p.style.display="none",document.querySelector(".genre-form").style.display="none",c.style.display="none",console.log("No movies found, hiding Load More Button")),document.querySelectorAll(".my-library-movie-list-item").forEach(r=>{r.addEventListener("click",i=>{const y=i.currentTarget.dataset.id;y&&v(y)})})}c.addEventListener("click",function(){m(l.value,!1)});h.addEventListener("click",function(){window.location.href="./catalog.html"});l.addEventListener("change",function(){const e=l.value;m(e)});async function w(){await L(),m()}w();
//# sourceMappingURL=commonHelpers3.js.map

import{T as _,o as B}from"./assets/main-Cz0Hiq6T.js";import"./assets/vendor-CN01XXcz.js";document.addEventListener("DOMContentLoaded",async()=>{const p=new _,i=document.querySelector(".catalog-movie-list"),f=document.querySelector(".catalog-sorry-message"),l=document.querySelector(".input-text"),k=document.querySelector(".catalog-button"),M=document.querySelector(".year-select"),b=document.querySelector(".x-button"),o=document.querySelector(".pagination-container"),r=document.getElementById("loader-catalog"),E={"Science Fiction":"Sci-Fi"};let h=1,c=1,y="";f.style.display="none";const C=async(e=1,s=18)=>{try{const t=y?await p.searchMovieTotal(y,e):await p.getTrendingMoviesTotal("week",e);return c=Math.ceil(t.total_results/20),r.style.display="none",t.results.slice(0,s)}catch(t){return r.style.display="none",console.error("Error fetching movies:",t),[]}},S=await(async()=>{try{return await p.getMovieGenres()}catch(e){return console.error("Error fetching genres:",e),[]}})(),w=(e,s)=>s?e.filter(t=>new Date(t.release_date).getFullYear()==s):e,x=e=>{const s=Math.floor(e/2),t=e%2>=1?1:0;return'<svg class="star full"><use xlink:href="#icon-star"></use></svg>'.repeat(s)+(t?'<svg class="star half"><use xlink:href="#icon-star-half"></use></svg>':"")+'<svg class="star empty"><use xlink:href="#icon-star-outline"></use></svg>'.repeat(5-Math.ceil(e/2))},v=async(e=1)=>{r.style.display="block";const s=w(await C(e),M.value);i.innerHTML="",f.style.display=s.length?"none":"block",s.forEach(t=>{const m=t.genre_ids.slice(0,2).map(u=>{var L;return((L=S.find(q=>q.id===u))==null?void 0:L.name)||"Unknown"}).map(u=>E[u]||u).join(", "),d=t.release_date?new Date(t.release_date).getFullYear():"Unknown",n=Math.round(t.vote_average*10)/10,a=document.createElement("li");a.classList.add("card"),a.style.background=`url(https://image.tmdb.org/t/p/w500${t.poster_path}) center/cover`,a.dataset.id=t.id,a.innerHTML=`
        <div class="card-content">
          <h2>${t.title}</h2>
          <p>${m} | ${d} <span class="stars">${x(n)}</span></p>
        </div>
      `,a.addEventListener("click",()=>B(t.id)),i.appendChild(a)}),T(e)},T=e=>{if(o.innerHTML="",c<=1)return;const s=n=>{const a=document.createElement("button");return a.textContent=n,a.classList.add("page-number-button"),n===e&&(a.classList.add("active"),a.disabled=!0),a.addEventListener("click",()=>{e=n,i.innerHTML="",r.style.display="block",v(e)}),a},t=s(1),m=Math.max(1,e-2),d=Math.min(c,e+2);if(o.appendChild(t),e>4){const n=document.createElement("span");n.textContent="...",o.appendChild(n)}for(let n=m;n<=d;n++)n!==1&&o.appendChild(s(n));if(d<c){const n=document.createElement("span");n.textContent="...",o.appendChild(n),o.appendChild(s(c))}},g=()=>{i.innerHTML="",r.style.display="block",y=l.value.trim(),h=1,v(h)};k.addEventListener("click",g),M.addEventListener("change",g),b.addEventListener("click",()=>{l.value="",g()}),l.addEventListener("input",()=>b.style.visibility=l.value.trim()?"visible":"hidden"),v(h)});
//# sourceMappingURL=catalog.js.map

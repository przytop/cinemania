import{T as B,o as H}from"./assets/main-BTS95jxs.js";import"./assets/vendor-CTT6gwRZ.js";document.addEventListener("DOMContentLoaded",async()=>{const v=new B,d=document.querySelector(".catalog-movie-list"),L=document.querySelector(".catalog-sorry-message"),o=document.querySelector(".input-text"),k=document.querySelector(".catalog-button"),M=document.querySelector(".year-select"),u=document.querySelector(".x-button"),l=document.querySelector(".pagination-container"),c=document.getElementById("loader-catalog"),E={"Science Fiction":"Sci-Fi"};let h=1,r=1,m="";L.style.display="none";const C=async(e=1,s=18)=>{try{const t=m?await v.searchMovieTotal(m,e):await v.getTrendingMoviesTotal("week",e);return r=Math.ceil(t.total_results/20),c.style.display="none",t.results.slice(0,s)}catch(t){return c.style.display="none",console.error("Error fetching movies:",t),[]}},w=await(async()=>{try{return await v.getMovieGenres()}catch(e){return console.error("Error fetching genres:",e),[]}})(),x=(e,s)=>s?e.filter(t=>new Date(t.release_date).getFullYear()==s):e,S=e=>{const s=Math.floor(e/2),t=e%2>=1?1:0;return'<svg class="star full"><use xlink:href="#icon-star"></use></svg>'.repeat(s)+(t?'<svg class="star half"><use xlink:href="#icon-star-half"></use></svg>':"")+'<svg class="star empty"><use xlink:href="#icon-star-outline"></use></svg>'.repeat(5-Math.ceil(e/2))},y=async(e=1)=>{c.style.display="block";const s=x(await C(e),M.value);d.innerHTML="",L.style.display=s.length?"none":"block",s.forEach(t=>{const b=t.genre_ids.slice(0,2).map(n=>{var i;return((i=w.find(q=>q.id===n))==null?void 0:i.name)||"Unknown"}).map(n=>E[n]||n).join(", "),g=t.release_date?new Date(t.release_date).getFullYear():"Unknown",p=Math.round(t.vote_average*10)/10,a=document.createElement("li");a.classList.add("card"),a.style.background=`url(https://image.tmdb.org/t/p/w500${t.poster_path}) center/cover`,a.dataset.id=t.id,a.innerHTML=`
        <div class="card-content">
          <h2>${t.title}</h2>
          <p>${b} | ${g} <span class="stars">${S(p)}</span></p>
        </div>
      `,a.addEventListener("click",()=>H(t.id)),d.appendChild(a)}),T(e)},T=e=>{if(l.innerHTML="",r<=1)return;const s=n=>{const i=document.createElement("button");return i.textContent=n,i.classList.add("page-number-button"),n===e&&(i.classList.add("active"),i.disabled=!0),i.addEventListener("click",()=>{e=n,d.innerHTML="",c.style.display="block",y(e)}),i},t=document.createElement("button");t.textContent="<",t.classList.add("arrow-button"),t.disabled=e===1,t.addEventListener("click",()=>{e>1&&(e--,d.innerHTML="",c.style.display="block",y(e))}),l.appendChild(t);const b=s(1),g=Math.max(1,e-1),p=Math.min(r,e+1);if(l.appendChild(b),e>3){const n=document.createElement("span");n.textContent="...",l.appendChild(n)}for(let n=g;n<=p;n++)n!==1&&l.appendChild(s(n));if(p<r){const n=document.createElement("span");n.textContent="...",l.appendChild(n),l.appendChild(s(r))}const a=document.createElement("button");a.textContent=">",a.classList.add("arrow-button"),a.disabled=e===r,a.addEventListener("click",()=>{e<r&&(e++,d.innerHTML="",c.style.display="block",y(e))}),l.appendChild(a)},f=()=>{d.innerHTML="",c.style.display="block",m=o.value.trim(),h=1,y(h)};o.addEventListener("keydown",e=>{e.key==="Enter"&&o.value.trim()&&(f(),o.value="",u.style.visibility="hidden")}),o.addEventListener("input",()=>u.style.visibility=o.value?"visible":"hidden"),u.addEventListener("click",()=>{o.value="",u.style.visibility="hidden"}),k.addEventListener("click",()=>{o.value.trim()?(f(),o.value="",u.style.visibility="hidden"):o.focus()}),M.addEventListener("change",f),y(h)});
//# sourceMappingURL=catalog.js.map

import{T as $,o as D}from"./assets/main-DAoONcfQ.js";import"./assets/vendor-CTT6gwRZ.js";document.addEventListener("DOMContentLoaded",async()=>{const m=new $,w=document.querySelector(".catalog-movie-list"),C=document.querySelector(".catalog-sorry-message"),r=document.querySelector(".input-text"),M=document.querySelector(".catalog-button"),h=document.querySelector(".year-select"),v=document.querySelector(".x-button"),c=document.querySelector(".pagination-container"),y=document.getElementById("loader-catalog"),k={"Science Fiction":"Sci-Fi"};let f="",d=1,b;C.style.display="none";const x=async(e,n)=>{try{let o=[];if(f){h.disabled=!1;const t=await m.searchMovieTotal(f,e,n);o=t.results,b=t.total_pages}else h.disabled=!0,d=1,o=(await m.getTrendingMoviesTotal("week",d)).results,b=1;return y.style.display="none",o}catch(o){return y.style.display="none",console.error("Error fetching movies:",o),[]}},S=async()=>{try{return await m.getMovieGenres()}catch(e){return console.error("Error fetching genres:",e),[]}},q=e=>{const n=Math.floor(e/2),o=e%2>=1?1:0;return'<svg class="star full"><use xlink:href="#icon-star"></use></svg>'.repeat(n)+(o?'<svg class="star half"><use xlink:href="#icon-star-half"></use></svg>':"")+'<svg class="star empty"><use xlink:href="#icon-star-outline"></use></svg>'.repeat(5-Math.ceil(e/2))},u=async e=>{w.innerHTML="",y.style.display="block";const n=await x(e,h.value),o=await S();C.style.display=n.length?"none":"block",n.forEach(t=>{const g=t.genre_ids.slice(0,2).map(a=>{var s;return((s=o.find(l=>l.id===a))==null?void 0:s.name)||"Unknown"}).map(a=>k[a]||a).join(", "),p=t.release_date?new Date(t.release_date).getFullYear():"Unknown",E=Math.round(t.vote_average*10)/10,i=document.createElement("li");i.classList.add("card"),i.style.background=`url(https://image.tmdb.org/t/p/w500${t.poster_path}) center/cover`,i.dataset.id=t.id,i.innerHTML=`
        <div class="card-content">
          <h2>${t.title}</h2>
          <p>${g} | ${p} <span class="stars">${q(E)}</span></p>
        </div>
      `,i.addEventListener("click",()=>D(t.id)),w.appendChild(i)}),T(e,b)},T=(e,n)=>{if(c.innerHTML="",n<=1)return;const o=s=>{const l=document.createElement("button");return l.textContent=s,l.classList.add("page-number-button"),s===e&&(l.classList.add("active"),l.disabled=!0),l.addEventListener("click",()=>{e=s,u(e)}),l},t=document.createElement("button");t.textContent="<",t.classList.add("arrow-button"),t.disabled=e===1,t.addEventListener("click",()=>{e>1&&(e--,u(e))}),c.appendChild(t);const g=o(1);if(c.appendChild(g),e>3){const s=document.createElement("span");s.textContent="...",c.appendChild(s)}let p=3;window.innerWidth>=768&&(p=5),window.innerWidth>=1024&&(p=7);const E=Math.max(1,e-Math.floor(p/2)),i=Math.min(n,e+Math.floor(p/2));for(let s=E;s<=i;s++)s!==1&&c.appendChild(o(s));if(i<n){const s=document.createElement("span");s.textContent="...",c.appendChild(s),c.appendChild(o(n))}const a=document.createElement("button");a.textContent=">",a.classList.add("arrow-button"),a.disabled=e===n,a.addEventListener("click",()=>{e<n&&(e++,u(e))}),c.appendChild(a)},L=()=>{f=r.value.trim(),d=1,u(d)};r.addEventListener("keydown",e=>{e.key==="Enter"&&r.value.trim()&&L()}),r.addEventListener("input",()=>v.style.visibility=r.value?"visible":"hidden"),v.addEventListener("click",()=>{r.value="",v.style.visibility="hidden"}),M.addEventListener("click",()=>{r.value.trim()?L():r.focus()});const B=new Date().getFullYear(),_=1900;for(let e=B;e>=_;e--){const n=document.createElement("option");n.value=e,n.textContent=e,h.appendChild(n)}h.addEventListener("change",()=>{d=1,u(d)}),u(d)});
//# sourceMappingURL=catalog.js.map

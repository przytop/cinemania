{"version":3,"file":"commonHelpers3.js","sources":["../src/js/library.js"],"sourcesContent":["import openMovieInfoModal from './modal-window';\n\nconst movieList = document.querySelector('.my-library-movie-list');\nconst sorry = document.querySelector('.my-library-sorry');\nconst loadMoreButton = document.querySelector(\n  '.my-library-main-section .my-library-button'\n);\nconst mainSection = document.querySelector('.my-library-main-section');\nconst genreSelect = document.querySelector('#genre');\n\n// Variables to track state\nlet currentDisplayCount = 0;\nconst batchSize = 9;\n\n// Function to create a movie list item\nfunction createMovieListItem(movie) {\n  const listItem = document.createElement('li');\n  listItem.classList.add('my-library-movie-list-item');\n  const genreString = movie.genre_ids.join(', ');\n\n  const id = movie.id;\n  listItem.dataset.id = id;\n\n  const imageUrl = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n  listItem.style.backgroundImage = `url(${imageUrl})`;\n  listItem.style.backgroundSize = 'cover';\n  listItem.style.backgroundPosition = 'center';\n  listItem.innerHTML = `\n        <div class=\"my-library-gradient\"></div>\n        <div class=\"my-library-movie\">\n          <span class=\"my-library-movie-title\">${movie.title}</span>\n          <span class=\"my-library-movie-genres\">${genreString} | ${movie.release_date}</span>\n        </div>\n    `;\n\n  \n        document.querySelectorAll('.my-library-movie-list-item').forEach(item => {\n          item.addEventListener('click', event => {\n            const id = event.target.getAttribute('data-id');\n            if (id) {\n              // Ensure the id is present\n            openMovieInfoModal(id);\n            }\n          });\n          \n        });\n    \n  return listItem;\n}\n\n// Function to render the movie list\nfunction renderMovieList(genre = '', reset = true) {\n  const movies = JSON.parse(localStorage.getItem('myLibrary')) || [];\n\n  const filteredMovies = genre\n    ? movies.filter(movie =>\n        movie.genre.toLowerCase().includes(genre.toLowerCase())\n      )\n    : movies;\n\n  if (reset) {\n    currentDisplayCount = 0;\n    movieList.innerHTML = ''; // Clear current list\n  }\n\n  if (filteredMovies.length > 0) {\n    mainSection.style.display = 'block';\n    sorry.style.display = 'none';\n\n    const moviesToDisplay = filteredMovies.slice(\n      currentDisplayCount,\n      currentDisplayCount + batchSize\n    );\n    moviesToDisplay.forEach(movie => {\n      const listItem = createMovieListItem(movie);\n      movieList.appendChild(listItem);\n    });\n\n    currentDisplayCount += batchSize;\n\n    if (currentDisplayCount >= filteredMovies.length) {\n      loadMoreButton.style.display = 'none';\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n  } else {\n    sorry.style.display = 'block';\n    mainSection.style.display = 'none';\n    loadMoreButton.style.display = 'none';\n  }\n}\n\n// Load more button\nloadMoreButton.addEventListener('click', function () {\n  renderMovieList(genreSelect.value, false);\n});\n\n// Event listener for genre selection\ngenreSelect.addEventListener('change', function () {\n  const selectedGenre = genreSelect.value;\n  renderMovieList(selectedGenre);\n});\n\nrenderMovieList();\n\n\n"],"names":["movieList","sorry","loadMoreButton","mainSection","genreSelect","currentDisplayCount","batchSize","createMovieListItem","movie","listItem","genreString","id","imageUrl","item","event","openMovieInfoModal","renderMovieList","genre","reset","movies","filteredMovies","selectedGenre"],"mappings":"kFAEA,MAAMA,EAAY,SAAS,cAAc,wBAAwB,EAC3DC,EAAQ,SAAS,cAAc,mBAAmB,EAClDC,EAAiB,SAAS,cAC9B,6CACF,EACMC,EAAc,SAAS,cAAc,0BAA0B,EAC/DC,EAAc,SAAS,cAAc,QAAQ,EAGnD,IAAIC,EAAsB,EAC1B,MAAMC,EAAY,EAGlB,SAASC,EAAoBC,EAAO,CAClC,MAAMC,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,4BAA4B,EACnD,MAAMC,EAAcF,EAAM,UAAU,KAAK,IAAI,EAEvCG,EAAKH,EAAM,GACjBC,EAAS,QAAQ,GAAKE,EAEtB,MAAMC,EAAW,kCAAkCJ,EAAM,WAAW,GACpE,OAAAC,EAAS,MAAM,gBAAkB,OAAOG,CAAQ,IAChDH,EAAS,MAAM,eAAiB,QAChCA,EAAS,MAAM,mBAAqB,SACpCA,EAAS,UAAY;AAAA;AAAA;AAAA,iDAG0BD,EAAM,KAAK;AAAA,kDACVE,CAAW,MAAMF,EAAM,YAAY;AAAA;AAAA,MAK7E,SAAS,iBAAiB,6BAA6B,EAAE,QAAQK,GAAQ,CACvEA,EAAK,iBAAiB,QAASC,GAAS,CACtC,MAAMH,EAAKG,EAAM,OAAO,aAAa,SAAS,EAC1CH,GAEJI,EAAmBJ,CAAE,CAEjC,CAAW,CAEX,CAAS,EAEAF,CACT,CAGA,SAASO,EAAgBC,EAAQ,GAAIC,EAAQ,GAAM,CACjD,MAAMC,EAAS,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,GAAK,GAE1DC,EAAiBH,EACnBE,EAAO,OAAOX,GACZA,EAAM,MAAM,YAAW,EAAG,SAASS,EAAM,aAAa,CACvD,EACDE,EAEAD,IACFb,EAAsB,EACtBL,EAAU,UAAY,IAGpBoB,EAAe,OAAS,GAC1BjB,EAAY,MAAM,QAAU,QAC5BF,EAAM,MAAM,QAAU,OAEEmB,EAAe,MACrCf,EACAA,EAAsBC,CAC5B,EACoB,QAAQE,GAAS,CAC/B,MAAMC,EAAWF,EAAoBC,CAAK,EAC1CR,EAAU,YAAYS,CAAQ,CACpC,CAAK,EAEDJ,GAAuBC,EAEnBD,GAAuBe,EAAe,OACxClB,EAAe,MAAM,QAAU,OAE/BA,EAAe,MAAM,QAAU,UAGjCD,EAAM,MAAM,QAAU,QACtBE,EAAY,MAAM,QAAU,OAC5BD,EAAe,MAAM,QAAU,OAEnC,CAGAA,EAAe,iBAAiB,QAAS,UAAY,CACnDc,EAAgBZ,EAAY,MAAO,EAAK,CAC1C,CAAC,EAGDA,EAAY,iBAAiB,SAAU,UAAY,CACjD,MAAMiB,EAAgBjB,EAAY,MAClCY,EAAgBK,CAAa,CAC/B,CAAC,EAEDL,EAAiB"}